$.fn.fmatter.showlink=function(c,a,l){var e={baseLinkUrl:a.baseLinkUrl,showAction:a.showAction,addParam:a.addParam||"",target:a.target,idName:a.idName},f="",g="",h;if(a.colModel!==undefined&&a.colModel.formatoptions!==undefined){e=$.extend({},e,a.colModel.formatoptions)}if(e.target){f=' target="'+e.target+'"'}if(e.title){g=' title="'+e.title+'"'}var b=null;if(e.idValue=="id"){b=a.rowId}else{b=l[e.idValue];if((b==undefined||b=="")&&e.idValue.indexOf(".")>-1){var d=l;$.each(e.idValue.split("."),function(m,n){d=d[n]});b=d}}h=e.baseLinkUrl+e.showAction+"?"+e.idName+"="+b+e.addParam;if($.fmatter.isString(c)||$.fmatter.isNumber(c)){return"<a "+f+g+' href="'+h+'">'+c+"</a>"}return $.fn.fmatter.defaultFormat(c,a)};var Grid=function(){var a=false;return{initGridDefault:function(){$.extend($.ui.multiselect,{locale:{addAll:"全部添加",removeAll:"全部移除",itemsCount:"已选择项目列表"}});$.extend($.jgrid.ajaxOptions,{dataType:"json"});$.extend($.jgrid.defaults,{guiStyle:"bootstrap",iconSet:"fontAwesome",datatype:"json",loadui:false,loadonce:false,filterToolbar:{},ignoreCase:true,prmNames:{npage:"npage"},jsonReader:{repeatitems:false,root:"content",total:"totalPages",records:"totalElements"},treeReader:{level_field:"extraAttributes.level",parent_id_field:"extraAttributes.parent",leaf_field:"extraAttributes.isLeaf",expanded_field:"extraAttributes.expanded",loaded:"extraAttributes.loaded",icon_field:"extraAttributes.icon"},autowidth:true,rowNum:15,page:1,altclass:"ui-jqgrid-evennumber",height:"stretch",viewsortcols:[true,"vertical",true],mtype:"GET",viewrecords:true,rownumbers:true,toppager:true,pagerpos:"center",recordpos:"right",gridview:true,altRows:true,sortable:false,multiboxonly:true,multiselect:true,multiSort:false,forceFit:false,shrinkToFit:true,sortorder:"desc",sortname:"id",ajaxSelectOptions:{cache:true},loadError:function(g,l,c,f){try{var d="表格数据加载处理失败,请尝试刷新或联系管理员";var b=jQuery.parseJSON(g.responseText);if(b.type=="failure"||b.type=="error"){d=b.message}Global.notify("error",d)}catch(h){Global.notify("error","数据处理异常")}App.unblockUI()},subGridOptions:{reloadOnExpand:false}});$.extend($.jgrid.search,{multipleSearch:true,multipleGroup:true,width:700,jqModal:false,searchOperators:true,stringResult:true,searchOnEnter:true,defaultSearch:"bw",operandTitle:"点击选择查询方式",odata:[{oper:"eq",text:"等于\u3000\u3000"},{oper:"ne",text:"不等\u3000\u3000"},{oper:"lt",text:"小于\u3000\u3000"},{oper:"le",text:"小于等于"},{oper:"gt",text:"大于\u3000\u3000"},{oper:"ge",text:"大于等于"},{oper:"bw",text:"开始于"},{oper:"bn",text:"不开始于"},{oper:"in",text:"属于\u3000\u3000"},{oper:"ni",text:"不属于"},{oper:"ew",text:"结束于"},{oper:"en",text:"不结束于"},{oper:"cn",text:"包含\u3000\u3000"},{oper:"nc",text:"不包含"},{oper:"nu",text:"不存在"},{oper:"nn",text:"存在"},{oper:"bt",text:"介于"}],operands:{eq:"=",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^","in":"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#",bt:"~~"}});$.extend($.jgrid.del,{serializeDelData:function(b){b.ids=b.id;b.id="";return b},errorTextFormat:function(c){var b=jQuery.parseJSON(c.responseText);return b.message},afterComplete:function(d){var c=new Array();var b=jQuery.parseJSON(d.responseText);if(b.type=="success"){top.$.publishMessage(b.message);c[0]=true}else{top.$.publishError(b.message);c[0]=false}return c},ajaxDelOptions:{dataType:"json"}});$.jgrid.extend({bindKeys:function(b){var c=$.extend({upKey:true,downKey:true,onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:true},b||{});return this.each(function(){var d=this;if(!$("body").is("[role]")){$("body").attr("role","application")}d.p.scrollrows=c.scrollingRows;$(d).keydown(function(h){var l=$(d).find("tr[tabindex=0]")[0],n,g,m,f=d.p.treeReader.expanded_field;if(l){m=d.p._index[$.jgrid.stripPref(d.p.idPrefix,l.id)];if(h.keyCode===37||h.keyCode===38||h.keyCode===39||h.keyCode===40){if(h.keyCode===38&&c.upKey){g=l.previousSibling;n="";if(g){if($(g).is(":hidden")){while(g){g=g.previousSibling;if(!$(g).is(":hidden")&&$(g).hasClass("jqgrow")){n=g.id;break}}}else{n=g.id}}$(d).jqGrid("setSelection",n,true,h);h.preventDefault()}if(h.keyCode===40&&c.downKey){g=l.nextSibling;n="";if(g){if($(g).is(":hidden")){while(g){g=g.nextSibling;if(!$(g).is(":hidden")&&$(g).hasClass("jqgrow")){n=g.id;break}}}else{n=g.id}}$(d).jqGrid("setSelection",n,true,h);h.preventDefault()}if(h.keyCode===37){if(d.p.treeGrid&&d.p.data[m][f]){$(l).find("div.treeclick").trigger("click")}$(d).triggerHandler("jqGridKeyLeft",[d.p.selrow]);if($.isFunction(c.onLeftKey)){c.onLeftKey.call(d,d.p.selrow)}}if(h.keyCode===39){if(d.p.treeGrid&&!d.p.data[m][f]){$(l).find("div.treeclick").trigger("click")}$(d).triggerHandler("jqGridKeyRight",[d.p.selrow]);if($.isFunction(c.onRightKey)){c.onRightKey.call(d,d.p.selrow)}}}else{if(h.keyCode===13){var e=h.target;if(e.tagName==="TEXTAREA"){return true}h.stopPropagation();$(d).triggerHandler("jqGridKeyEnter",[d.p.selrow]);if($.isFunction(c.onEnter)){c.onEnter.call(d,d.p.selrow)}}else{if(h.keyCode===32){h.stopPropagation();$(d).triggerHandler("jqGridKeySpace",[d.p.selrow]);if($.isFunction(c.onSpace)){c.onSpace.call(d,d.p.selrow)}}else{if(h.keyCode===27){h.stopPropagation();$(d).jqGrid("restoreRow",d.p.selrow,c.afterrestorefunc);$(d).jqGrid("showAddEditButtons")}}}}}})})},refresh:function(){this.each(function(){var b=this;if(!b.grid){return}$(b).jqGrid("setGridParam",{datatype:"json"}).trigger("reloadGrid")})},search:function(b){this.each(function(){var e=this;if(!e.grid){return}var c=$(e).jqGrid("getGridParam","url");for(var d in b){c=addOrReplaceUrlParameter(c,d,b[d])}$(e).jqGrid("setGridParam",{url:c,page:1}).trigger("reloadGrid")})},exportExcelLocal:function(b){this.each(function(){var f=this;if(!f.grid){return}if(!confirm("确认导出当前页面 "+f.p.caption+" 数据为Excel下载文件？")){return}var e=new Array();e=$(f).getDataIDs();var m=f.p.colModel;var p=f.p.colNames;var h="";for(k=0;k<p.length;k++){var n=m[k];if(n.hidedlg||n.hidden||n.disableExport){continue}h=h+p[k]+"\t"}h=h+"\n";for(i=0;i<e.length;i++){data=$(f).getRowData(e[i]);for(j=0;j<p.length;j++){var n=m[j];if(n.hidedlg||n.hidden||n.disableExport){continue}var g=data[n.name];var l=null;if(n.searchoptions&&n.searchoptions.value){l=n.searchoptions.value}else{if(n.editoptions&&n.editoptions.value){l=n.editoptions.value}}if(l){g=l[g]}if(g.indexOf("<")>-1&&g.indexOf(">")>-1){g=$(g).text()}if(g==""){g=data[n.name]}if(g=="null"||g==null){g=""}g=g.replace(/\&nbsp;/g,"");h=h+g+"\t"}h=h+"\n"}h=h+"\n";var c=$('<form method="post" target = "_blank" action="'+WEB_ROOT+'/admin/util/grid/export"></form>').appendTo($("body"));var o=$('<input type="hidden" name="exportDatas"/>').appendTo(c);var d=$('<input type="hidden" name="fileName"/>').appendTo(c);d.val("export-data.xls");o.val(h);c.submit();c.remove()})},refreshRowIndex:function(){var b=$(this);$.each($(b).jqGrid("getDataIDs"),function(c,d){$(b).find("#"+d).find("input,select").each(function(){var e=$(this).attr("name");$(this).attr("name",e.substring(0,e.indexOf("[")+1)+c+e.substring(e.indexOf("]"),e.length))})})},getAtLeastOneSelectedItem:function(g){var f=$(this);var d=[];var e=jQuery(f).jqGrid("getGridParam","selarrrow");if(e.length>0){for(var b=0;b<e.length;b++){var c=$("#jqg_"+jQuery(f).attr("id")+"_"+e[b]).is(":disabled");if(!c){d.push(e[b])}}}else{var h=jQuery(f).jqGrid("getGridParam","selrow");if(h){d.push(h)}}if(g){jQuery(f).find("table.jqsubgrid").each(function(){var n=$(this).jqGrid("getGridParam","selarrrow");for(var l=0;l<n.length;l++){var m=$("#jqg_"+jQuery(this).attr("id")+"_"+e[l]).is(":disabled");if(!m){d.push(n[l])}}})}if(d.length==0){Global.notify("error","请至少选择一条行项目！");return false}else{return d}},getOnlyOneSelectedItem:function(e){var g=$(this);var d=[];var f=jQuery(g).jqGrid("getGridParam","selarrrow");if(f.length>0){for(var b=0;b<f.length;b++){var c=$("#jqg_"+jQuery(g).attr("id")+"_"+f[b]).is(":disabled");if(!c){d.push(f[b])}}}else{var h=jQuery(g).jqGrid("getGridParam","selrow");if(h){d.push(h)}}if(d.length==0){if(e){Global.notify("error","请选取操作项目")}return false}else{if(d.length>1){Global.notify("error","只能选择一条操作项目");return false}return d[0]}},getSelectedRowdatas:function(){var b=$(this);var c=[];var e=b.jqGrid("getGridParam","selarrrow");if(e){$.each(e,function(g,h){var l=b.jqGrid("getRowData",h);l.id=h;c.push(l)})}else{var d=b.jqGrid("getGridParam","selrow");if(d){var f=b.jqGrid("getRowData",d);f.id=d;c.push(f)}}return c},getSelectedRowdata:function(){var b=$(this);var c=b.jqGrid("getGridParam","selrow");if(c){return b.jqGrid("getRowData",c)}},getDirtyRowdatas:function(){var l=$(this);var g=[];var f=l.jqGrid("getGridParam","colModel");var d=[];$.each(f,function(o,n){if(n.editable){d.push(n.name)}});var b=l.jqGrid("getDataIDs");var h=0;$.each(b,function(n,o){if(!Util.startWith(o,"-")&&o!=""){h++}});var e=BooleanUtil.toBoolean(l.attr("data-clone"));$.each(b,function(n,q){var p=l.jqGrid("getRowData",q);if(BooleanUtil.toBoolean(p["extraAttributes.dirtyRow"])){if(Util.startWith(q,"-")){q=""}var o={id:q};$.each(d,function(s,r){o[r]=p[r]});o._arrayIndex=p._arrayIndex;if(p["extraAttributes.operation"]){o["extraAttributes.operation"]=p["extraAttributes.operation"]}g.push(o)}});var m=l.jqGrid("getGridParam","batchEntitiesPrefix");if(m){var c={};$.each(g,function(n,p){var o=p._arrayIndex;delete p._arrayIndex;if(o==undefined||o==""){o=h;h++}$.each(p,function(r,q){c[m+"["+o+"]."+r]=q})});return c}return g},insertNewRowdata:function(f){var b=$(this);var e=null;var d=b.jqGrid("getDataIDs");$.each(d,function(g,l){var h=b.jqGrid("getRowData",l);if(!BooleanUtil.toBoolean(h["extraAttributes.dirtyRow"])){e=l;return false}});var c=-Math.floor(new Date().getTime()+Math.random()*100+100);f["extraAttributes.dirtyRow"]=true;if(e){b.jqGrid("addRowData",c,f,"before",e)}else{b.jqGrid("addRowData",c,f,"last")}return c},setEditingRowdata:function(l,c){var b=$(this);var d=b.find("tbody");for(var f in l){var g="input[name='"+f+"'],select[name='"+f+"'],textarea[name='"+f+"']";var e=d.find(g);if(c==false){if($.trim(e.val())!=""){continue}}var h=l[f];e.val(h).attr("title",h);if(e.is("select")){e.select2({openOnEnter:false,placeholder:"请选择...",matcher:function(n,q){var m=Pinyin.getCamelChars(q)+"";var p=m.toUpperCase().indexOf(n.toUpperCase())==0;var o=q.toUpperCase().indexOf(n.toUpperCase())==0;return(p||o)}})}}},getEditingRowdata:function(){var b=$(this);var d=b.find("tbody");var e={};var c="input,select,textarea";d.find(c).each(function(){var f=$(this);e[f.attr("name")]=f.val()});return e},isEditingMode:function(d){var b=$(this);var c=b.find('tr[editable="1"]');if(c.size()>0){if(d==undefined){return true}if(d===true){alert("请先保存或取消正在编辑的表格数据行项后再操作")}else{alert(d)}return true}return false},sumColumn:function(d,f){var b=$(this);if(f==undefined){f=2}var e=b.jqGrid("getCol",d,false,"sum");var c=Math.pow(10,f);return Math.round(e*c)/c},getDataFromBindSeachForm:function(d){var b=$(this);var c=b.jqGrid("getGridParam","bindSearchFormData");var e=c[d];return e}});a=true},initGrid:function(L,w){if(!a){Grid.initGridDefault()}var aa=$(L);if(aa.hasClass("ui-jqgrid-btable")){return}if(aa.attr("id")==undefined){aa.attr("id","grid_"+new Date().getTime())}if(w==undefined&&aa.data("gridOptions")==undefined){alert("Grid options undefined: class="+aa.attr("class"));return}var p=$.extend(true,{},aa.data("gridOptions"),w);var d=aa.attr("data-grid");var z=null;var S=aa.attr("id")+"-context-menu-container";var M=null;var e=(d=="items"?false:true);var A=(d=="items"?false:true);var D=$.extend(true,{},$.jgrid.defaults,{formatter:{integer:{defaultValue:""},number:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,defaultValue:""},currency:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,defaultValue:""}},cmTemplate:{sortable:d=="items"?false:true},viewsortcols:d=="items"?[true,"vertical",false]:[true,"vertical",true],altRows:d=="items"?false:true,hoverrows:d=="items"?false:true,pgbuttons:d=="items"?false:true,pginput:d=="items"?false:true,rowList:d=="items"?[]:[10,15,20,50,100,200,500,1000,2000],inlineNav:{add:p.editurl||d=="items"?true:false,edit:p.editurl||d=="items"?true:false,del:p.delurl||d=="items"?true:false,restoreAfterSelect:d=="items"?false:true,addParams:{addRowParams:{extraparam:{},restoreAfterError:false,beforeSaveRow:function(c){if(D.beforeInlineSaveRow){D.beforeInlineSaveRow.call(aa,c)}},aftersavefunc:function(ak,al){if(D.editurl=="clientArray"){aa.jqGrid("resetSelection");if(D.afterInlineSaveRow){D.afterInlineSaveRow.call(aa,ak)}setTimeout(function(){$("#"+z).find(".ui-pg-div span.fa-plus").click()},200);return}var aj=jQuery.parseJSON(al.responseText);if(aj.type=="success"||aj.type=="warning"){Global.notify(aj.type,aj.message);var c=aj.data.id;aa.find("#"+ak).attr("id",c);aa.jqGrid("resetSelection");aa.jqGrid("setSelection",c);if(D.afterInlineSaveRow){D.afterInlineSaveRow.call(aa,ak)}setTimeout(function(){$("#"+z).find(".ui-pg-div span.fa-plus").click()},200)}else{if(aj.type=="failure"||aj.type=="error"){Global.notify("error",aj.message)}else{Global.notify("error","数据处理异常，请联系管理员")}}},errorfunc:function(aj,ak){var c=jQuery.parseJSON(ak.responseText);Global.notify("error",c.message)}}},editParams:{restoreAfterError:false,beforeSaveRow:function(c){if(D.beforeInlineSaveRow){D.beforeInlineSaveRow.call(aa,c)}},oneditfunc:function(am){var aj=aa.jqGrid("getGridParam","iCol");var c=aa.jqGrid("getGridParam","colModel")[aj];var al=aa.find("tr#"+am);var an=al.find("> td:eq("+aj+")");var ak=an.find("input:visible:first");if(ak.size()>0&&ak.attr("readonly")==undefined){setTimeout(function(){ak.focus()},200)}else{al.find("input:visible:enabled:first").focus()}},aftersavefunc:function(aj,am){var al=true;if(D.editurl!="clientArray"){var c=jQuery.parseJSON(am.responseText);if(c.type=="success"||c.type=="warning"){Global.notify(c.type,c.message)}else{if(c.type=="failure"||c.type=="error"){Global.notify("error",c.message);al=false}else{Global.notify("error","数据处理异常，请联系管理员");al=false}}}if(al){if(D.afterInlineSaveRow){D.afterInlineSaveRow.call(aa,aj)}if(D.editurl!="clientArray"){var ak=aa.find("tr.jqgrow[id='"+aj+"']").next("tr");if(ak.size()>0){var an=ak.attr("id");aa.jqGrid("resetSelection");aa.jqGrid("setSelection",an);setTimeout(function(){$("#"+z).find(".ui-pg-div span.fa-pencil").click()},200)}}}},errorfunc:function(aj,ak){if(ak.status==404){Global.notify("error",ak.status+": 请求地址未找到")}else{var c=jQuery.parseJSON(ak.responseText);Global.notify("error",c.message)}}}},inlineEditing:{serializeSaveData:function(c){if(c.oper==="add"){c.id=""}c["extraAttributes.dirtyRow"]=true;return c}},filterToolbar:A,multiselect:e,contextMenu:true,columnChooser:true,exportExcelLocal:true,loadBeforeSend:function(){App.blockUI({target:aa.closest(".ui-jqgrid"),animate:true,overlayColor:"none"})},subGridBeforeExpand:function(){var c=aa.closest(".ui-jqgrid-bdiv");c.css({height:"auto"})},beforeProcessing:function(aj){if(aj&&aj.content){var c=1000;$.each(aj.content,function(ak,al){if(al.extraAttributes&&al.extraAttributes.dirtyRow){al.id=-(c++)}});if(aj.totalElements>=(2147473647-10000)){aa.jqGrid("setGridParam",{recordtext:"{0} - {1}\u3000"})}}},loadComplete:function(ak){App.unblockUI(aa.closest(".ui-jqgrid"));aa.jqGrid("showAddEditButtons");if(ak==undefined){return}if(ak.total==undefined&&ak.totalElements==undefined){alert("表格数据格式不正确");return}if(ak&&ak.content){$.each(ak.content,function(al,am){aa.setRowData(am.id,{_arrayIndex:al})});if(ak.totalElements>=(2147473647-10000)){aa.closest(".ui-jqgrid").find(".ui-pg-table td[id^='last_']").addClass("ui-state-disabled");aa.closest(".ui-jqgrid").find(".ui-pg-table .ui-pg-input").each(function(){$(this).parent().html($(this))})}}if(d=="items"&&D.inlineNav.add!=false){for(var aj=1;aj<=3;aj++){aa.addRowData(-aj,{})}}if(Q=="enable"&&D.contextMenu&&M.find("li").length>0){aa.find("tr.jqgrow").each(function(){$(this).contextmenu({target:"#"+S,onItem:function(an,am){var al=$(am).attr("role-idx");M.find('a[role-idx="'+al+'"]').click();return true}})})}if(D.footerrow){if(D.footerLocalDataColumn){$.each(D.footerLocalDataColumn,function(am,ao){var an=aa.jqGrid("sumColumn",ao);var al=[];al[ao]=an;aa.footerData("set",al)})}else{$.each(D.colModel,function(an,am){if(am.footersum!=undefined&&am.footersum==false){return}if(am.formatter=="integer"||am.formatter=="currency"||am.formatter=="number"){var ao=aa.jqGrid("sumColumn",am.name);var al=[];al[am.name]=ao;aa.footerData("set",al)}})}}if(aa.attr("data-selected")){aa.jqGrid("setSelection",aa.attr("data-selected"),false)}var c=p.userLoadComplete;if(c){c.call(aa,ak)}$('[data-hover="dropdown"]',aa.closest(".ui-jqgrid")).dropdownHover()},beforeSelectRow:function(ak){if(D.inlineNav.restoreAfterSelect==false){var aj=aa.jqGrid("getGridParam","selrow");var c=aa.find("tr#"+aj).attr("editable");if(aj&&aj!=ak&&c=="1"){$("#"+z).find(".ui-pg-div span.fa-floppy-o").click();return false}}return true},onSelectRow:function(ak,c,aj){aa.find("tr.jqgrow").attr("tabindex",-1);aa.find("tr.jqgrow[id='"+ak+"']").attr("tabindex",0);if(d=="items"){$("#"+z).find(".ui-pg-div span.fa-pencil").click()}},onCellSelect:function(aj,c){aa.jqGrid("setGridParam",{iCol:c})},ondblClickRow:function(al,an,aj,am){var c=$("#"+z).find("i.fa-edit").parent("a");if(c.size()>0){c.click()}else{if(d!="items"){var ak=$("#"+z).find(".ui-pg-div span.fa-pencil");if(ak.size()>0){ak.click()}else{$("#"+z).find("i.fa-credit-card").parent("a").click()}}}am.stopPropagation()},editcol:"display"},p);if($.isFunction(D.url)){D.url=D.url.call(aa)}if(D.url==undefined){D.url=aa.attr("data-url")}if(D.url==undefined){D.datatype="local"}if(BooleanUtil.toBoolean(aa.attr("data-readonly"))){D.inlineNav.add=false;D.inlineNav.edit=false;D.inlineNav.del=false}if(D.pager==undefined||D.pager){z=aa.attr("id")+"_pager";$("<div id='"+z+"'/>").insertAfter(aa);D.pager="#"+z}else{D.toppager=false}if(D.toppager){D.toppager="#"+aa.attr("id")+"_toppager"}if(D.treeGrid){D.rownumbers=false}if(p.editurl==undefined&&d=="items"){D.editurl="clientArray"}if(p.delurl==undefined&&d=="items"){D.delurl="clientArray"}if(D.editurl=="clientArray"){D.cellsubmit=D.editurl}else{D.cellurl=D.editurl}var J=0;var I=false;var K=[];var h=[];$.each(D.colModel,function(aj,c){h.push(c.name)});if($.inArray("id",h)){D.colModel.push({label:"流水号",name:"id",width:50,hidden:true});if(D.colNames){D.colNames.push("流水号")}}if($.inArray("createdBy",h)){D.colModel.push({label:"创建者",name:"createdBy",width:50,align:"center",hidden:true});if(D.colNames){D.colNames.push("创建者")}}if($.inArray("createdDate",h)){D.colModel.push({label:"创建时间",name:"createdDate",formatter:"timestamp",hidden:true});if(D.colNames){D.colNames.push("创建时间")}}if($.inArray("lastModifiedBy",h)){D.colModel.push({label:"最后更新者",name:"lastModifiedBy",width:50,align:"center",hidden:true});if(D.colNames){D.colNames.push("最后更新者")}}if($.inArray("lastModifiedDate",h)){D.colModel.push({label:"最后更新时间",name:"lastModifiedDate",formatter:"timestamp",hidden:true});if(D.colNames){D.colNames.push("最后更新时间")}}D.colModel.push({label:"标题",name:"display",hidden:true,search:false,hidedlg:true});if(D.colNames){D.colNames.push("标题")}$.each(D.colModel,function(al,ak){if(ak.frozen){I=true}ak=$.extend(true,{},{editoptions:{rows:1},searchoptions:{clearSearch:false,searchhidden:true,defaultValue:"",buildSelect:function(au){if(au==null){au=data}var at="<select>";at+="<option value=''></option>";for(var ar in au){ar=ar+"";at+=("<option value='"+ar+"'>"+au[ar]+"</option>")}at+="</select>";return at}}},ak);if(ak.name.toLowerCase()=="todo"){ak.formatter=function(au,ar,av,at){return"TODO"}}if(ak.responsive){if(ak.hidden==undefined){var aj=$(window).width();var am=ak.responsive;if(am=="sm"){if(aj<768){ak.hidden=true}}else{if(am=="md"){if(aj<992){ak.hidden=true}}else{if(am=="lg"){if(aj<1200){ak.hidden=true}}}}}}if(ak.formatter=="currency"){ak=$.extend({},{width:80,align:"right"},ak);ak.formatoptions=$.extend({},ak.formatoptions,{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,prefix:"",defaultValue:""});ak.searchoptions=$.extend({},ak.searchoptions,{sopt:["eq","ne","ge","le","gt","lt"]})}if(ak.formatter=="percentage"){ak=$.extend(true,{width:50,align:"right"},ak);ak.formatter=function(au,ar,av,at){if(au){return Math.round(au*10000)/100+"%"}else{return au}}}if(ak.stype=="date"||ak.sorttype=="date"||ak.formatter=="date"||ak.formatter=="timestamp"||ak.formatter=="shortTimestamp"){if(ak.formatter=="timestamp"){ak=$.extend(true,{width:150,fixed:true,align:"center",formatoptions:{srcformat:"Y-m-d H:i:s",newformat:"Y-m-d H:i:s"}},ak);ak.formatter="date"}else{if(ak.formatter=="shortTimestamp"){ak=$.extend(true,{width:150,fixed:true,align:"center",formatoptions:{srcformat:"Y-m-d H:i",newformat:"Y-m-d H:i"}},ak);ak.formatter="date"}else{ak=$.extend(true,{width:120,fixed:true,align:"center",formatoptions:{newformat:"Y-m-d"}},ak)}}ak.searchoptions=$.extend({},ak.searchoptions,{sopt:["bt","eq","ne","ge","le","gt","lt"],dataInit:function(at){var ar=$(at);$(at).daterangepicker($.extend(true,$.fn.daterangepicker.defaults,ak.searchoptions.daterangepicker),function(av,au){$(at).focus();aa.trigger("triggerToolbar")});$(at).off("focus")}});ak.editoptions=$.extend(ak.editoptions,{dataInit:function(ar){if(ak.editoptions.time){$(ar).datetimepicker({language:"zh-CN",autoclose:true,todayBtn:true,minuteStep:10,format:"yyyy-mm-dd hh:ii"})}else{$(ar).datepicker({language:"zh-CN",autoclose:true,todayBtn:true,format:"yyyy-mm-dd"})}}})}if(ak.formatter=="showlink"){ak=$.extend(true,{formatoptions:{idValue:"id",target:"modal-ajaxify"}},ak)}if(ak.formatter=="integer"){ak=$.extend(true,{width:60,align:"center",formatoptions:{defaultValue:"",thousandsSeparator:""},searchoptions:{sopt:["eq","ne","ge","le","gt","lt"]}},ak)}if(ak.formatter=="number"){ak.sorttype=ak.formatter;ak.edittype=ak.formatter;ak=$.extend(true,{width:60,align:"right",formatoptions:{defaultValue:""},searchoptions:{sopt:["eq","ne","ge","le","gt","lt"]}},ak)}if(ak.name=="id"){ak=$.extend(true,{width:80,align:"center",title:false,formatter:function(av,at,ax,au){if(av&&av.length>10){var ar=av.length;var aw=av.substring(ar-5,ar);return"<span data='"+av+"' onclick='$(this).html($(this).attr(\"data\"))'>..."+aw+"</span>"}else{return av}},frozen:true},ak);ak.searchoptions=$.extend(true,ak.searchoptions,{sopt:["eq","ne","ge","le","gt","lt"]})}if(ak.formatter=="checkbox"){ak.edittype=ak.formatter;ak=$.extend(true,{width:60,align:"center",formatter:"checkbox",stype:"select"},ak);ak.searchoptions.value={"":"","true":"是","false":"否"};ak.searchoptions.sopt=["eq","ne"];ak.editoptions.value="true:false"}if(ak.edittype==undefined||ak.edittype=="text"||ak.edittype=="select"||ak.edittype=="textarea"){var c=ak.editoptions.dataInit;ak.editoptions=$.extend(ak.editoptions,{dataInit:function(at){var ar=$(at);ar.removeClass("editable").addClass("form-control").attr("autocomplete","off").css({width:"100%"});if(c){c.call(this,at)}if(ak.editoptions.updatable==false){var au=aa.jqGrid("getSelectedRowdata");if(au&&au.id){ar.attr("disabled",true)}else{if(!ar.attr("placeholder")){ar.attr("placeholder","创建后不可修改");ar.attr("title","创建后不可修改")}}}if(ar.is("input[type='text']")){ar.blur(function(){ar.val($.trim(ar.val()))})}if(ar.is("select")){ar.select2({openOnEnter:false,placeholder:"请选择...",matcher:function(aw,az){var av=Pinyin.getCamelChars(az)+"";var ay=av.toUpperCase().indexOf(aw.toUpperCase())==0;var ax=az.toUpperCase().indexOf(aw.toUpperCase())==0;return(ay||ax)}})}if(ak.editoptions.spellto){ar.change(function(){var av={};av[ak.editoptions.spellto]=Pinyin.getCamelChars($.trim(ar.val()));aa.jqGrid("setEditingRowdata",av)})}}})}if(ak.formatter=="select"){if(ak.searchoptions.sopt==undefined){ak.searchoptions.sopt=["eq","ne"]}if(ak.edittype==undefined){ak.edittype="select"}if(ak.stype==undefined){ak.stype="select"}if(typeof ak.searchoptions.value==="function"){ak.searchoptions.value=ak.searchoptions.value.call(aa)}if(ak.searchoptions.valueJsonString){ak.searchoptions.value={"":""};var aq=$.parseJSON(ak.searchoptions.valueJsonString);for(var ap in aq){ak.searchoptions.value[ap]=aq[ap]}}ak.editoptions=$.extend(true,{value:ak.searchoptions.value},ak.editoptions)}if(!ak.hidden){if(ak.width){J+=ak.width}else{J+=300}}if(ak.hasOwnProperty("searchoptions")){var an=ak.searchoptions;if(an.hasOwnProperty("defaultValue")&&an.defaultValue!=""){var ao=ak.index;if(ao==undefined){ao=ak.name}K[K.length++]={field:ao,op:ak.searchoptions.sopt[0],data:an.defaultValue}}}if(ak.searchoptions.sopt==undefined){ak.searchoptions.sopt=["cn","bw","bn","eq","ne","nc","ew","en"]}if(ak.index==undefined){if(ak.formatter=="date"||ak.formatter=="timestamp"){ak.index=ak.name+"@Date"}else{if(ak.formatter=="checkbox"){ak.index=ak.name+"@Boolean"}else{if(ak.formatter=="integer"||ak.formatter=="currency"||ak.formatter=="number"||ak.formatter=="percentage"){ak.index=ak.name+"@Number"}}}}D.colModel[al]=ak});if(d=="items"){D.colModel.push({name:"extraAttributes.dirtyRow",hidden:true,hidedlg:true});if(D.colNames){D.colNames.push("extraAttributes.dirtyRow")}D.colModel.push({name:"_arrayIndex",hidedlg:true,hidden:true});if(D.colNames){D.colNames.push("_arrayIndex")}D.colModel.push({name:"extraAttributes.operation",hidedlg:true,hidden:true});if(D.colNames){D.colNames.push("extraAttributes.operation")}}var n=$(".theme-panel .grid-shrink-option").val();if(n=="true"){D.shrinkToFit=true}else{if(Number(J)>Number(aa.parent().width())){$.each(D.colModel,function(aj,c){if(!c.hidden){if(c.width==undefined){c.width=300}}});D.shrinkToFit=false}}var Z=false;if(aa.closest(".ui-subgrid").size()==0&&d!="items"){if(D.height==undefined||D.height=="stretch"){Z=true;D.height=0}}if(D.filterToolbar){if(D.postData==undefined){D.postData={}}var u=D.postData;var r={};if(u.hasOwnProperty("filters")){r=JSON.parse(u.filters)}var m=[];if(r.hasOwnProperty("rules")){m=r.rules}$.each(K,function(aj,c){var ak=false;$.each(m,function(al,am){if(c.field==am.field){ak=true;return}});if(ak==false){m.push(c)}});if(m.length>0){r.groupOp="AND";r.rules=m;u._search=true;u.filters=JSON.stringify(r)}}if(D.jqPivot){var H=D.jqPivot;delete D.jqPivot;var g=D.url;D={multiselect:false,pager:D.pager,shrinkToFit:false};aa.jqGrid("jqPivot",g,H,D,{reader:"content"});return}else{aa.jqGrid(D)}if(D.filterToolbar){aa.jqGrid("filterToolbar",D.filterToolbar);var v=$("#jqgh_"+aa.attr("id")+"_rn");var G='<a href="javascript:;" title="显示快速查询"><span class="ui-icon ui-icon-carat-1-s"></span></a>';var O='<a href="javascript:;" title="隐藏快速查询"><span class="ui-icon ui-icon-carat-1-n"></span></a>';if(aa.is(".ui-jqgrid-subgrid")||D.filterToolbar=="hidden"){v.html(G);aa[0].toggleToolbar()}else{v.html(O)}v.on("click",".ui-icon-carat-1-s",function(){v.html(O);aa[0].toggleToolbar()});v.on("click",".ui-icon-carat-1-n",function(){v.html(G);aa[0].toggleToolbar()})}if(D.setGroupHeaders){aa.jqGrid("setGroupHeaders",$.extend(true,{useColSpanStyle:true},D.setGroupHeaders))}aa.bindKeys({upKey:false,downKey:false,onEnter:function(aj){if(aj==undefined){return}aa.find("tr.jqgrow").attr("tabindex",-1);var c=aa.find("tr.jqgrow[id='"+aj+"']");c.attr("tabindex",0);if(D.editurl){if(c.attr("editable")=="1"){E.find(".ui-pg-div span.fa-floppy-o").click()}else{E.find(".ui-pg-div span.fa-pencil").click()}return false}}});if(D.pager||D.toppager){var E=$(D.pager);var ai=Util.notSmallViewport();if(ai){ai=(d=="items"?false:true)}var ac=Util.notSmallViewport();if(ac){ac=(d=="items"?false:true)}aa.jqGrid("navGrid",D.pager,{edit:false,add:false,del:false,refresh:ai,search:ai,position:"left",cloneToTop:true});var R=D.navButtons;if(R==undefined||R==false){R=[]}else{if(!Array.isArray(R)){R=[R]}}if(D.columnChooser){aa.jqGrid("showHideColumnMenu");R.push({caption:"设定显示列和顺序",buttonicon:"fa-th-list",onClickButton:function(){var c=aa.jqGrid("getGridParam","width");aa.jqGrid("columnChooser",{width:470,done:function(aj){if(aj){this.jqGrid("remapColumns",aj,true);aa.jqGrid("setGridWidth",c,false)}else{}}})},operationRows:"tool",showOnToolbar:false})}R.push({caption:"收缩显示模式",buttonicon:"fa-list-alt",onClickButton:function(){var c=aa.jqGrid("getGridParam","width");aa.jqGrid("destroyFrozenColumns");aa.jqGrid("setGridWidth",c,true)},operationRows:"tool",showOnToolbar:false});var ah=Util.notSmallViewport();if(ah){ah=(d=="items"?false:true)}if(D.exportExcelLocal&&ah){R.push({caption:"导出当前显示数据",buttonicon:"fa-file-excel-o",onClickButton:function(){aa.jqGrid("exportExcelLocal",D.exportExcelLocal)},operationRows:"tool",showOnToolbar:false})}if(D.gridDnD){var ad=$.extend(true,{dropbyname:true,beforedrop:function(c,ak,aj){aj.id=$(ak.draggable).attr("id");return aj},autoid:function(c){return c.id},drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover",greedy:true},ondrop:function(c,am,ap){var aq=$("#"+this.id);var ar=aq.closest(".ui-subgrid");var al="";if(ar.size()>0){al=ar.prev(".jqgrow").attr("id")}var aj=$(am.draggable).attr("id");var an={};var ao=aq.jqGrid("getGridParam","parent");var ak=aq.jqGrid("getGridParam","editurl");if(ak){an[ao]=al;an.id=aj;aq.ajaxPostURL({url:ak,success:function(){return true},confirmMsg:false,data:an})}}},D.gridDnD);R.push({caption:"开启拖放移动模式",buttonicon:"fa-arrows",onClickButton:function(){var c=null;if(aa.closest(".ui-subgrid").size()>0){$topGrid=aa.parent().closest(".ui-jqgrid-btable:not(.ui-jqgrid-subgrid)");c=$topGrid.parent().find(".ui-jqgrid-btable")}else{c=aa.parent().find(".ui-jqgrid-btable")}var ak=[];c.each(function(al,am){ak.push("#"+$(this).attr("id"))});var aj=ak.reverse();$.each(aj,function(am,ap){var ao=$.map(ak,function(aq){return aq!=ap?aq:null});var al=$(ap);if(ao.length>0){var an=$.extend({connectWith:ao.join(",")},ad);al.jqGrid("gridDnD",an)}if(!al.hasClass("ui-jqgrid-dndtable")){al.addClass("ui-jqgrid-dndtable")}})},operationRows:"tool",showOnToolbar:true})}if(D.viewurl){R.push({caption:"查看详情",buttonicon:"fa-edit",onClickButton:function(ak){var c="TBD";if(D.editcol){var al=aa.jqGrid("getRowData",ak);c=al[D.editcol];if(c.indexOf("<")>-1&&c.indexOf(">")>-1){c=$(c).text()}}else{c=aa.find("tr#"+ak+" > td.jqgrid-rownum").html()}var aj=Util.addOrReplaceUrlParameter(D.viewurl,"id",ak);aa.extAjaxBootstrapModal("show",{width:"70%",url:aj,title:"查看："+c})},operationRows:"single"})}if(D.fullediturl){if(D.addable==undefined||D.addable!=false){R.push({caption:"表单新增数据",buttonicon:"fa-plus-square-o",onClickButton:function(){aa.extAjaxBootstrapModal("show",{width:"70%",title:"新增",url:D.fullediturl})},operationRows:"none",showOnToolbar:true})}R.push({caption:"表单编辑数据",buttonicon:"fa-edit",onClickButton:function(ak){var c="TBD";if(D.editcol){var al=aa.jqGrid("getRowData",ak);c=al[D.editcol];if(c.indexOf("<")>-1&&c.indexOf(">")>-1){c=$(c).text()}}else{c=aa.find("tr#"+ak+" > td.jqgrid-rownum").html()}var aj=Util.addOrReplaceUrlParameter(D.fullediturl,"id",ak);aa.extAjaxBootstrapModal("show",{width:"70%",url:aj,title:"编辑："+c})},title:"可双击行项进行编辑数据",badge:"双击",operationRows:"single",showOnToolbar:true,showOnDropdown:true})}if(D.delurl){R.push({caption:"删除选择数据",buttonicon:"fa-trash-o",onClickButton:function(ak){if(D.delurl==undefined||D.delurl=="clientArray"){$.each(ak,function(am,ap){if(Util.startWith(ap,"-")){aa.jqGrid("delRowData",ap)}else{var an=aa.find("#"+ap);var ao=aa.jqGrid("getRowData",ap);for(var al in ao){if(al=="id"||Util.endWith(al,".id")||al=="_arrayIndex"){}else{if(al=="extraAttributes.dirtyRow"){ao[al]=true}else{if(al=="extraAttributes.operation"){ao[al]="remove"}else{ao[al]=""}}}}aa.jqGrid("setRowData",ap,ao);an.hide()}})}else{if(ak){var c="id";if(D.multiselect){c="ids"}var aj=Util.addOrReplaceUrlParameter(D.delurl,c,ak.join(","));aa.ajaxPostURL({url:aj,success:function(al){$.each(ak,function(am,ao){var ao=$.trim(ao);if(al.data&&al.data[ao]){var an=aa.find("tr.jqgrow[id='"+ao+"']");var ap=al.data[ao];an.pulsate({color:"#bf1c56",repeat:3})}else{aa.jqGrid("delRowData",ao)}})},confirmMsg:"确认批量删除所选记录吗？"})}}},title:"勾选并批量删除数据",operationRows:"multiple",showOnToolbar:true,showOnDropdown:true})}if(D.pager&&(D.inlineNav.add||D.inlineNav.edit||D.inlineNav.del)&&D.inlineNav!=false){aa.jqGrid("navSeparatorAdd",undefined,{position:"last"});aa.jqGrid("inlineNav",D.inlineNav)}var N=false;$.each(R,function(c,aj){aj=$.extend({buttonicon:"fa-edit",onClickButton:function(al){},position:"last",cursor:"pointer",operationRows:"none",showOnToolbar:true,showOnDropdown:true},aj);if(!aj.title){aj.title=aj.caption}var ak=aj.onClickButton;aj.onClickButton=function(am){var al=$(this);if(aj.operationRows=="single"){var ao=al.getOnlyOneSelectedItem(true);if(ao){ak.call(al,ao,am)}}else{if(aj.operationRows=="multiple"){var an=al.getAtLeastOneSelectedItem(true);if(an){ak.call(al,an,am)}}else{ak.call(al,am)}}};R[c]=aj;if(aj.showOnToolbar){if(N==false){N=true;aa.jqGrid("navSeparatorAdd",undefined,{position:"last"})}if(aj.showOnToolbarText){aa.jqGrid("navButtonAdd",aj)}else{aa.jqGrid("navButtonAdd",$.extend({},aj,{caption:false}))}}});aa.jqGrid("navSeparatorAdd",undefined,{position:"first"});var C=[];C.push('<div class="btn-group btn-group-more-option" style="margin-left: 3px;margin-right: 3px;">');C.push('<button type="button" class="btn btn-xs default dropdown-toggle" data-toggle="dropdown">');C.push('更多操作 <i class="fa fa-angle-down"></i>');C.push("</button>");C.push('<ul class="dropdown dropdown-menu" role="menu">');C.push("</ul>");C.push("</div>");aa.jqGrid("navButtonAdd",{caption:"",buttonicon:"fa-more-option",position:"first",title:"更多操作"});var U=aa.closest("div.ui-jqgrid");var b=U.find(".fa-more-option").parent().parent();b.replaceWith(C.join(""));var X=U.find(".ui-jqgrid-pager .btn-group-more-option");X.addClass("dropup");var s={none:0,single:1,multiple:2,tool:9};R.sort(function(aj,c){return s[aj.operationRows]-s[c.operationRows]});var x=U.find(".btn-group-more-option").find("ul");$.each(R,function(aj,ak){if(ak.showOnDropdown){var c='<i class="fa '+ak.buttonicon+'"></i> '+ak.caption;if(ak.badge){c=c+'<span class="badge badge-info"> '+ak.badge+" </span>"}var al=$('<li data-type="'+ak.operationRows+'"><a tabindex="-1" href="javascript:;">'+c+"</a> </li>");al.children("a").bind("click",function(){ak.onClickButton.call(aa)});al.appendTo(x)}});var y=x.find('li[data-type="none"]').size(),ab=x.find('li[data-type="single"]').size();var l=x.find('li[data-type="multiple"]').size(),F=x.find('li[data-type="tool"]').size();if(y>0&&(ab>0||l>0)){x.find('li[data-type="none"]:last').after('<li class="divider"> </li>')}if(ab>0&&(l>0||F>0)){x.find('li[data-type="single"]:last').after('<li class="divider"> </li>')}if(l>0&&F>0){x.find('li[data-type="multiple"]:last').after('<li class="divider"> </li>')}if(D.pager&&D.toppager){if(aa.closest(".ui-subgrid").size()>0){$(D.pager).hide()}}var Q=$(".theme-panel .context-menu-option").val();if(Q=="enable"&&D.contextMenu&&M.find("li").length>0){var T=$('<div id="'+S+'" class="context-menu"></div>');M.clone().appendTo(T);$("body").append(T);aa.unbind("contextmenu")}}var B=L.jqGrid("getGridParam","colModel");for(var W=0;W<B.length;W++){var ag=B[W];if(ag.tooltips){var Y=$('<span class="glyphicon glyphicon-exclamation-sign tooltipster"  title="'+ag.tooltips+'"></span>');var o=ag.index?ag.index:ag.name;var V=$(".ui-jqgrid-sortable[id*='"+o+"']",q);if(V.size()>0){V.prepend(Y);Y.tooltipster({contentAsHTML:true,offsetY:5,theme:"tooltipster-punk"})}}}var af=D.editrulesurl;if(af){var q=$("#gbox_"+L.attr("id")+"  .ui-jqgrid-labels");q.ajaxJsonUrl(af,function(am){var aj=L.jqGrid("getGridParam","colModel");for(var al in am){for(var ak=0;ak<aj.length;ak++){var ap=aj[ak];if((ap.index&&ap.index==al)||(ap.name&&ap.name==al)){aj[ak].editrules=$.extend(am[al]||{},aj[ak].editrules||{});if(aj[ak].editrules.required==undefined){aj[ak].editrules.required=false}delete ap.editrules.timestamp;delete ap.editrules.shortTimestamp;if(ap.editrules.tooltips&&ap.tooltips==undefined){var ao=$('<span class="glyphicon glyphicon-exclamation-sign tooltipster"  title="'+ap.editrules.tooltips+'"></span>');var an=$(".ui-jqgrid-sortable[id*='"+al+"']",q);if(an.size()>0){an.prepend(ao);ao.tooltipster({contentAsHTML:true,offsetY:5,theme:"tooltipster-punk"})}delete ap.editrules.tooltips}break}}}})}if(Z){var t=$("#gbox_"+L.attr("id"));var ae=0;var P="div.ui-jqgrid-titlebar,div.ui-jqgrid-hdiv,div.ui-jqgrid-pager,div.ui-jqgrid-toppager,div.ui-jqgrid-sdiv";t.find(P).filter(":visible").each(function(){ae+=$(this).outerHeight()});ae=ae+50;var f=$(window).height()-aa.closest(".ui-jqgrid").offset().top-ae;if(f<300){f=300}aa.setGridHeight(f,true)}Grid.refreshWidth();if(I){aa.jqGrid("setFrozenColumns")}aa.jqGrid("gridResize",{minWidth:500,minHeight:100});aa.closest(".ui-jqgrid").find(".ui-resizable-s").dblclick(function(){var c=aa.jqGrid("getGridParam","height");aa.jqGrid("setGridHeight",aa.height()+17)}).attr("title","鼠标双击可自动扩展显示区域")},refreshWidth:function(){$("table.ui-jqgrid-btable:visible").each(function(){var c=$(this);var d=c.jqGrid("getGridParam","width");var b=c.closest("div.ui-jqgrid").parent("div").width();if(d!=b){c.jqGrid("setGridWidth",b);var e=$(this).jqGrid("getGridParam","groupHeader");if(e){c.jqGrid("destroyGroupHeader");c.jqGrid("setGroupHeaders",e)}}})},initRecursiveSubGrid:function(f,c,e,h){var b=$("<table data-grid='table' class='ui-jqgrid-subgrid'/>").appendTo($("#"+f));var d=b.closest("table.ui-jqgrid-btable").data("gridOptions");d.url=Util.addOrReplaceUrlParameter(d.url,"search['EQ_"+e+"']",c);if(d.fullediturl){d.fullediturl=Util.addOrReplaceUrlParameter(d.fullediturl,e,c)}d.inlineNav=$.extend(true,{addParams:{addRowParams:{extraparam:{}}}},d.inlineNav);d.inlineNav.addParams.addRowParams.extraparam[e]=c;d.parent=e;if(h){d.postData={}}b.data("gridOptions",d);Grid.initGrid(b);var g=$("#"+f).parent().closest(".ui-jqgrid-btable:not(.ui-jqgrid-subgrid)");if(d.gridDnD&&g.hasClass("ui-jqgrid-dndtable")){$("#"+f).find(".ui-icon-arrow-4:first").click()}},initSubGrid:function(e,d,c){var b=$("<table data-grid='table' class='ui-jqgrid-subgrid'/>").appendTo($("#"+e));b.data("gridOptions",c);Grid.initGrid(b)}}}();+function(d){var c=function(f,e){this.$element=d(f);this.options=d.extend({},c.DEFAULTS,e);this.init()};c.VERSION="1.0.0";c.DEFAULTS={};c.prototype.init=function(){var e=this.$element;var f=this.options;Grid.initGrid(e)};function b(e){return this.each(function(){var h=d(this);var g=h.data("extGrid");var f=typeof e=="object"&&e;if(!g){h.data("extGrid",(g=new c(this,f)))}if(typeof e=="string"){g[e]()}})}var a=d.fn.extGrid;d.fn.extGrid=b;d.fn.extGrid.Constructor=c;d.fn.extGrid.noConflict=function(){d.fn.extGrid=a;return this};d(document).ready(function(){App.addResizeHandler(function(){Grid.refreshWidth()})});Global.addComponent({plugin:b,expr:'table[data-grid="table"],table[data-grid="items"]',order:500})}(jQuery);