+function(d){var b=function(f,e){this.$element=d(f);this.options=d.extend({},b.DEFAULTS,e);this.init()};b.prototype.init=function(){var e=d(this.$element);var h=this.options;var k=e.data("placeholder")||(e.data("tags")?"请选择或输入...":"请选择...");if(e.find(' > option[value=""]').size()==0){e.prepend('<option value="">'+k+"</option>")}if(e.find(" > option[selected]").size()==0){e.find(' > option[value=""]').attr("selected",true)}var g=e.data("url");if(g){h=d.extend({minimumInputLength:1,ajax:{url:g,dataType:"json",data:function(m){var l={rows:h.termRows||10,page:m.page||1};l[h.termQuery]=m.term;return l},processResults:function(l,m){return{results:l.content,pagination:{more:!l.last}}}},templateResult:function(l){if(l.loading){return l.text}var m=l.display;if(h.itemDisplay){m=l[h.itemDisplay]}return m},templateSelection:function(l){if(l.display==undefined){return l.text}var m=l.display;if(h.itemLabel){m=l[h.itemLabel]}return m}},h)}var j=e.attr("data-cascade-parent");if(j){var f=e.closest("form").find("select[name='"+j+"']");e.data("cachedOptions",e.children("option").clone());var i=f.val();if(i&&i!=""){e.children("option").each(function(l,m){var o=d(this);var n=o.attr("data-cascade-parent");if(n&&n!=i){o.remove()}})}else{e.empty()}}e.select2(h);e.on("change",function(r){var o=d(this).children("option:selected").val();var v=h.cascadeName;if(v){var s=e.closest("form").find("select[name='"+v+"']");s.empty();if(o&&o!=""){var t=s.attr("data-cascade-parent");if(t){s.data("cachedOptions").each(function(){var x=d(this);var w=x.attr("data-cascade-parent");if(w==undefined||w==o){s.append(x);s.select2(h)}})}else{var q=s.data(o);if(q){s.append(q);s.select2(h)}else{var m=h.cascadeUrl;var n=o;var p=e.attr("name");var u=h.cascadeProperty;if(u){var l=e.find("option[value='"+o+"']");p=u;n=l.attr("data-"+u)}m=Util.AddOrReplaceUrlParameter(m,p,n);s.ajaxJsonUrl(m,function(x){var w=[];w.push("<option value=''></option>");for(var y in x){w.push("<option value='"+y+"'>"+x[y]+"</option>")}q=w.join("");s.append(q);s.select2(h);s.data(o,q)})}}}}});if(e.attr("required")=="required"||e.attr("required")=="true"||e.attr("data-rule-required")=="true"){e.on("select2-close",function(l){e.valid()})}};b.VERSION="1.0.0";b.DEFAULTS={language:"zh-CN",matcher:function(k,g){if(d.trim(k.term)===""){return g}if(typeof g.text==="undefined"){return null}if(d.trim(g.text)===""){return g}var f=k.term;var j=g.text;var e=Pinyin.getCamelChars(j)+"";var i=e.toUpperCase().indexOf(f.toUpperCase())==0;var h=j.toUpperCase().indexOf(f.toUpperCase())==0;if(i||h){return g}return null}};function c(e){Util.assert(d.fn.select2,"依赖组件 select2 未引入");return this.each(function(){var h=d(this);var g=h.data("extSelect");var f=typeof e=="object"&&e;if(!g){h.data("extSelect",(g=new b(this,f)))}if(typeof e=="string"){g[e]()}})}var a=d.fn.extSelect;d.fn.extSelect=c;d.fn.extSelect.Constructor=b;d.fn.extSelect.noConflict=function(){d.fn.extSelect=a;return this};Global.addComponent({plugin:c,expr:'select:not(.select2-ignore):not([data-toggle="double-multi-select"])'})}(jQuery);